/**
 * Convert SVG icons into VML for rendering in IE8 
 * 
 * @author SiteSupra.com
 */
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['jquery'], function ($) {
            return factory($);
        });
    } else {
        // AMD is not supported, assume all required scripts are
        // already loaded
        factory(jQuery);
    }
}(this, function ($) {
	
	
	/**
	* Core Framework
	* http://code.google.com/p/core-framework/
	* 
	* @version 1.0.5
	* @copyright Angeneer
	* @author Angel Kostadinov
	*/
	(function(){this.Core={};Core.Class=function(){};Core.apply=function(e,t,n){if(n){Core.apply(e,n)}if(e&&t&&typeof t==="object"){for(var r in t){e[r]=t[r]}}return e};Core.delegate=function(e,t,n){return typeof t==="function"?function(){arguments.push=Array.prototype.push;for(var r in n){arguments.push(n[r])}return t.apply(e,arguments)}:function(){return false}};Core.pattern=function(){return{isString:function(e){return typeof e==="string"},isArray:function(e){return e.constructor==Array},isFilemap:function(e){if(this.isObject(e)&&!this.isString(e)){for(var t in e){if(!this.isString(t))return false;if(!this.isArray(e[t]))return false}}else{return false}return true},isNumber:function(e){return Object.prototype.toString.call(e)==="[object Number]"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isClass:function(e){return typeof e=="function"&&typeof e.prototype=="object"?true:false},isFunction:function(e){return Object.prototype.toString.apply(e)==="[object Function]"},isBoolean:function(e){return Object.prototype.toString.apply(e)==="[object Boolean]"},isURI:function(e){var t=new RegExp("(ftp|http|https)","ig");return e.match(t)?true:false}}}();Core.mixin=function(){var e={defer:[],override:true};var t=function(){return{proto:null,mixins:null,augment:function(t){this.proto=t.shift(),this.mixins=t.shift(),e.defer=t.shift()||[],e.override=t.shift()||false;this.override();return this.proto},compose:function(){},override:function(){for(var e in this.mixins){proto=this.mixins[e].prototype||this.mixins[e];Core.apply(this.proto.prototype,proto);this.proto.prototype.mixinPrototypes[e]=proto}}}}();return function(){var e=Array.prototype.slice.call(arguments);e.unshift(this);return t.augment(e)}}();Core.Class.prototype={mixinPrototypes:[],delegate:Core.delegate,getMixin:function(e){return this.getMixins()[e]},getMixins:function(){return this.mixinPrototypes||{}}};Core.apply(Core.Class,{extend:function(e){Core.constructing=true;var t=new this,n=this.prototype;delete Core.constructing;Core.apply(t,e);var r=t.constructor=function(){if(!Core.constructing&&this.init){this.init.apply(this,arguments)}};t.superclass=n;Core.apply(r,{prototype:t,constructor:r,ancestor:this,extend:this.extend,mixin:this.mixin});if(e.mixins){this.mixin(e.mixins)}return r},extendPro:function(e){Core.constructing=true;var t=function(){if(!Core.constructing&&this.init){this.init.apply(this,arguments)}};t.prototype=new this;delete Core.constructing;for(key in e)(function(e,n){t.prototype[key]=!Core.pattern.isFunction(e)||!Core.pattern.isFunction(n)?e:function(){this._super=n;return e.apply(this,arguments)}})(e[key],t.prototype[key]);t.prototype.constructor=t;t.extend=this.extend;t.mixin=this.mixin;return t},mixin:Core.mixin});Core.Class.inherit=function(e){Core.constructing=true;e=e||function(){};var t=this;F=function(){this.parent=t;if(!Core.constructing){var n=e.apply(this,arguments),r=this;for(key in n)(function(e,t){r[key]=typeof e!="function"||typeof t!="function"?e:function(){this.parent=t;return e.apply(this,arguments)}})(n[key],r[key])}};F.prototype=new this;delete Core.constructing;F.prototype.constructor=F;F.inherit=arguments.callee;return F};Core.apply(Core,{Array:function(){var e={clear:function(){this.length=0;return this},map:function(e,t){var n=new Array(this.length);for(var r=0,i=this.length;r<i;r++)if(r in this)n[r]=e.call(t,this[r],r,this);return n},invoke:function(e){var t=Array.prototype.slice.call(arguments,1);return this.map(function(n){return n[e].apply(n,t)})},filter:function(e){var t=[];for(var n=0,r=this.length;n<r;++n){if(!e.call(this,this[n],n,this)){continue}t.push(this[n])}return t},clean:function(){return this.filter(function(e,t){return null===e?false:e.length})},contains:function(e){var t=this.length;while(t--){if(this[t]===e){return true}}return false}};return{get:function(t){Core.apply(t,e);return t}}}()});Core.apply(Core,{namespace:function(){return Core.apply(Core,{register:function(e,t,n){var r=e.split(".");for(var i=0;i<r.length;i++){var e=r[i];if(!this.exists(e,t)){t[e]=n}t=t[e]}return t},exists:function(e,t){return!t||typeof t[e]==="undefined"?false:true},autoload:function(e,t){var n={};var r=function(t){if(Core.pattern.isURI(e)){Core.loader.setConfig({path:""});return e}var n=[],r=new RegExp("((\\.\\.\\/)+)","i");relative=r.exec(t);if(relative&&relative.length){relative=relative.shift();t=t.substring(relative.length);n.push(relative)}n.push(t);return n.join("")};var i=function(e){var t=r(e);n[t]=[]};if(Core.pattern.isFilemap(e)){n=e}else{if(Core.pattern.isString(e)){i(e)}else{for(var s in e){i(e[s])}}}Core.loader.addScripts(n).autoload(t)}})}(),extend:function(e){return Core.Class.extend(e)},inherit:function(e){return Core.Class.inherit(e)},override:function(e,t){Core.apply(e.prototype,t)},define:function(e,t){return this.namespace.register(e,window,t)},require:function(e,t){this.namespace.autoload(e,t)},loader:function(){var e={},t=[],n=0,r={path:null,basePath:null,cache:true,dataType:"script",type:".js",method:"GET"};return{setConfig:function(e){$.extend(r,e);return this},getConfig:function(){return r},addScripts:function(t){e=$.extend(true,{},e,t);return this},loadScript:function(e,n,i){var s=t[e]||(t[e]={loaded:false,callbacks:[]});if(s.loaded){return n.apply(i)}s.callbacks.push({fn:n,context:i});if(s.callbacks.length==1){var o=[];o.push(r.path);o.push(r.basePath);o.push(e+(r.type||""));$.ajax({type:r.method,url:Core.Array.get(o).clean().join("/"),dataType:r.dataType,cache:r.cache,success:function(e){s.loaded=true;$.each(s.callbacks,function(){this.fn.apply(this.context)});s.callbacks.length=0},error:function(e,t,n){throw"Failed to load script with status "+e.status+" . Error: "+n}})}},clear:function(){this.queue.clear();return this},queue:function(){var n=function(e){if(-1==$.inArray(e,t)&&e.length){t.push(e)}};$.each(e,function(e,t){$.each(t,function(e,t){n(t)});n(e)});return this},autoload:function(e){var r=this.path();this.queue();(function(){if(n==t.length){return e.apply(window)}Core.loader.loadScript(t[n++],arguments.callee)})()},path:function(e){if(!r.path){var t=$("script").filter(function(){return this.src.indexOf(e)!=-1}).eq(0);if(t.size()){r.path=t.attr("src").slice(0,-1-e.length)}}return function(){return r.path}}("core.js")}}(),preloader:function(){var e=[],t=[],n=0,r={cache:true,parallel:true};var s={start:0,end:0};return{onComplete:function(e){},images:function(){return t},reset:function(){e=[];t=[];n=0;return this},queue:function(t){if(Core.pattern.isString(t)){e.push({source:t})}else{$.each(t,function(t,n){e.push(n)})}return this},finish:function(e,r,i){n--;$.each(t,function(e,t){if(t.index==r){t.size={width:i.width,height:i.height}}});if(0==n){s.end=(new Date).getTime();this.onComplete.apply(this,[{time:((s.end-s.start)/1e3).toPrecision(2),images:t}])}},preload:function(o){this.onComplete=o||this.onComplete;s.start=(new Date).getTime();n=i=e.length;while(i--){var u=new Image;t.push({index:i,image:u,size:{width:0,height:0}});u.onload=Core.delegate(this,this.finish,[i,u]);u.onerror=Core.delegate(this,this.finish,[i,u]);u.onabort=Core.delegate(this,this.finish,[i,u]);u.src=r.cache?e[i].source:e[i].source+"?u="+(new Date).getTime()}},preloadCssImages:function(e){var t=this.getCssImages();this.queue(t).preload(e)},getCssRules:function(){var e=[],t={};var n={rules:function(r){var i=r.length;while(i--){t={rule:r[i],selectorText:!r[i].selectorText?null:r[i].selectorText,declaration:r[i].cssText?r[i].cssText:r[i].style.cssText};e.push(t);var s=r[i].styleSheet||null;if(s){n.rules(s.cssRules)}}}};var r=document.styleSheets.length;while(r--){var i={rules:document.styleSheets[r].rules||document.styleSheets[r].cssRules,imports:document.styleSheets[r].imports||[]};n.rules(i.rules);for(x=0;x<i.imports.length;x++){n.rules(i.imports[x].rules||i.imports[x].cssRules)}}return e},getCssImages:function(){var e=this.getCssRules(),t=e.length,n=[],r=new RegExp("[^(|'\"]+.(gif|jpg|jpeg|png)\\)?","ig");while(t--){var i=e[t].declaration.match(r);if(i&&i.length){if(1==i.length){n.push(i)}else{for(var t in i){n.push(i[t])}}}}return n}}}()});Core.validator=function(){var e={},t=Core.Array.get(["required","message","element","tooltip","error"]);return{errors:false,tooltip:function(){var e=Core.extend({tooltip:null,create:function(){this.tooltip=$("<div/>").addClass("coretip");return this},empty:function(){this.tooltip.empty()},content:function(e){this.tooltip.html(e);return this},open:function(e){var t=e.offset();this.tooltip.css({top:t.top,left:t.left+e.width()+15,opacity:.95}).appendTo("body").fadeIn(200)},close:function(){this.tooltip.remove()}});return(new e).create()},display:function(e){var t=false;$("div.coretip").remove();$.each(e,function(e,n){if(n.error){t=true;n.element.addClass("invalid");n.tooltip.content(n.message).open(n.element)}else{n.element.removeClass("invalid");n.tooltip.close()}})},map:function(t,n){var r=$("form[id="+t+"]");e[t]={form:r.length>0?r:null,map:{}};if(e[t].form){$.each(n,function(n,r){e[t].map[n]=$.extend({error:false,message:null,tooltip:Core.validator.tooltip()},r)})}return this},auto:function(){$.each(e,Core.delegate(this,this.bind));return this},bind:function(e,t){if(t.form){t.form.find(":submit").unbind("click").bind("click",Core.delegate(this,this.validate,[t]))}},validate:function(e,t){t.form.find(":input").unbind("blur").bind({blur:Core.delegate(this,this.validate,[t])}).end();this.errors=false;$.each(t.map,Core.delegate(this,this.filter,[t]));if(!this.valid()){this.display(t.map)}return this.valid()},valid:function(){return this.errors?false:true},filter:function(e,t,n){var r=n.form.find(":input[name="+e+"]");if(t.required){$.each(t,Core.delegate(this,this.check,[e,r,n]))}},check:function(e,n,r,i,s){var o=false;if(!t.contains(e)){if(Core.pattern.isFunction(n)){n=n.apply(this,[i.val()])}if(n!==this[e].apply(this,[i.val(),i])){o=true;this.errors=true}$.extend(true,s.map[r],{error:o,element:i})}},empty:function(e){return null===e?false:e.length==0?true:false},email:function(e){var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return t.test(e)},alnum:function(e){return true},digit:function(e){return Core.pattern.isNumber(e)},alpha:function(e){return false},lower:function(e){return e==e.toLowerCase()},upper:function(e){return e==e.toUpperCase()},extend:function(e){Core.apply(this,e);return this},password:function(e){return true},checked:function(e,t){return t.is(":checked")?true:false},positive:function(e){return parseInt(e,10)>0?true:false},negative:function(e){return parseInt(e,10)<0?true:false},zero:function(e){return parseInt(e,10)===0?true:false},equalTo:function(e){return true},strcmp:function(e,t){return e==t?0:e>t?1:-1},ukpostcode:function(e){var t=/^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {1,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR 0AA)$/;return t.test(e)}}}()})(jQuery,window);Core.SVG=function(){var e=Core.extend({x:null,y:null,pathSegType:0,pathSegTypeAsLetter:null,vml:function(){return this.pathSegTypeAsLetter},curve:function(){}});e.PATHSEG_UNKNOWN=0;e.PATHSEG_CLOSEPATH=1;e.PATHSEG_MOVETO_ABS=2;e.PATHSEG_MOVETO_REL=3;e.PATHSEG_LINETO_ABS=4;e.PATHSEG_LINETO_REL=5;e.PATHSEG_CURVETO_CUBIC_ABS=6;e.PATHSEG_CURVETO_CUBIC_REL=7;e.PATHSEG_CURVETO_QUADRATIC_ABS=8;e.PATHSEG_CURVETO_QUADRATIC_REL=9;e.PATHSEG_ARC_ABS=10;e.PATHSEG_ARC_REL=11;e.PATHSEG_LINETO_HORIZONTAL_ABS=12;e.PATHSEG_LINETO_HORIZONTAL_REL=13;e.PATHSEG_LINETO_VERTICAL_ABS=14;e.PATHSEG_LINETO_VERTICAL_REL=15;e.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16;e.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17;e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18;e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19;var t=e.extend({pathSegType:e.PATHSEG_CLOSEPATH,pathSegTypeAsLetter:"z",vml:function(){return"xe"},curve:function(){return this.vml()}});var n=e.extend({pathSegType:e.PATHSEG_MOVETO_ABS,pathSegTypeAsLetter:"M",vml:function(){return"m"+[this.x,this.y].join(",")},curve:function(){return this.vml()}});var r=e.extend({pathSegType:e.PATHSEG_MOVETO_REL,pathSegTypeAsLetter:"m"});var i=e.extend({pathSegType:e.PATHSEG_LINETO_ABS,pathSegTypeAsLetter:"L",vml:function(){return"l"+[this.x,this.y].join(",")},curve:function(){var e=new u;e.x=this.x;e.y=this.y;e.x1=this.x;e.y1=this.y;e.x2=this.x;e.y2=this.y;return e.vml()}});var o=e.extend({pathSegType:e.PATHSEG_LINETO_REL,pathSegTypeAsLetter:"l",vml:function(){return this.pathSegTypeAsLetter+[this.x,this.y].join(",")},curve:function(){return"l"+[this.x,this.y].join(",")}});var u=e.extend({x1:null,y1:null,x2:null,y2:null,pathSegType:e.PATHSEG_CURVETO_CUBIC_ABS,pathSegTypeAsLetter:"C",vml:function(){return"c"+[this.x1,this.y1,this.x2,this.y2,this.x,this.y].join(", ")},curve:function(){return this.vml()}});var a=e.extend({x1:null,y1:null,x2:null,y2:null,pathSegType:e.PATHSEG_CURVETO_CUBIC_REL,pathSegTypeAsLetter:"c",vml:function(){return"v"+[this.x1,this.y1,this.x2,this.y2,this.x,this.y].join(",")},curve:function(){return this.vml()}});var f=e.extend({x1:null,y1:null,pathSegType:e.PATHSEG_CURVETO_QUADRATIC_ABS,pathSegTypeAsLetter:"Q"});var l=e.extend({x1:null,y1:null,pathSegType:e.PATHSEG_CURVETO_QUADRATIC_REL,pathSegTypeAsLetter:"q"});var c=e.extend({angle:null,largeArcFlag:true,sweepFlag:true,pathSegType:e.PATHSEG_ARC_ABS,pathSegTypeAsLetter:"A"});var h=e.extend({r1:null,r2:null,angle:null,largeArcFlag:true,sweepFlag:true,pathSegType:e.PATHSEG_ARC_REL,pathSegTypeAsLetter:"a"});var p=e.extend({pathSegType:e.PATHSEG_LINETO_HORIZONTAL_ABS,pathSegTypeAsLetter:"H"});var d=e.extend({pathSegType:e.PATHSEG_LINETO_HORIZONTAL_REL,pathSegTypeAsLetter:"h"});var v=e.extend({pathSegType:e.PATHSEG_LINETO_VERTICAL_ABS,pathSegTypeAsLetter:"V"});var m=e.extend({pathSegType:e.PATHSEG_LINETO_VERTICAL_REL,pathSegTypeAsLetter:"v"});var g=e.extend({pathSegType:e.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,pathSegTypeAsLetter:"S"});var y=e.extend({pathSegType:e.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,pathSegTypeAsLetter:"s"});var b=e.extend({pathSegType:e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,pathSegTypeAsLetter:"T"});var w=e.extend({pathSegType:e.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,pathSegTypeAsLetter:"t"});return{cast:function(e){for(var t=0,n=e.length;t<n;++t){e[t]=1*Math.round(1*Math.round(e[t]))}return e},path:function(e){var t=this.vml(e);return this.concat(t)},parse:function(t){var n=[],r=/([-+]?[0-9]*\.?[0-9]+)/gi;t=t.replace(/(\d*)((\.*\d*)(e ?-?\d*))/g,"$1");var i=t.match(/([MLHVCSQTAZ].*?)(?=[MLHVCSQTAZ]|$)/gi);for(var s=0;s<i.length;s++){var o=i[s].substring(0,1),u=i[s].substring(1,i[s].length);var a=u.match(r);if(a){for(x=0;x<a.length;x++){var f=Math.round(10*a[x]);a[x]=" "+f}u=a.join()}args=u.split(/[,]+/);args=this.cast(args);var l=args.length;switch(o){case"M":element=this.createSVGPathSegMovetoAbs(args[0],args[1]);break;case"m":element=this.createSVGPathSegMovetoRel(args[0],args[1]);break;case"A":element=this.createSVGPathSegArcAbs(args[5],args[6],args[7],args[1],args[2],args[3],args[4]);break;case"a":element=this.createSVGPathSegArcRel(args[5],args[6],args[7],args[1],args[2],args[3],args[4]);break;case"L":element=this.createSVGPathSegLinetoAbs(args[0],args[1]);break;case"l":element=this.createSVGPathSegLinetoRel(args[0],args[1]);break;break;case"V":element=this.createSVGPathSegLinetoVerticalAbs(args[0]);break;case"v":element=this.createSVGPathSegLinetoVerticalRel(args[0]);break;case"H":element=this.createSVGPathSegLinetoHorizontalAbs(args[0]);break;case"h":element=this.createSVGPathSegLinetoHorizontalRel(args[0]);break;case"C":element=this.createSVGPathSegCurvetoCubicAbs(args[4],args[5],args[0],args[1],args[2],args[3]);break;case"c":element=this.createSVGPathSegCurvetoCubicRel(args[4],args[5],args[0],args[1],args[2],args[3]);break;case"Q":element=this.createSVGPathSegCurvetoQuadraticAbs(args[2],args[3],args[0],args[1]);break;case"q":element=this.createSVGPathSegCurvetoQuadraticRel(args[2],args[3],args[0],args[1]);break;case"S":element=this.createSVGPathSegCurvetoCubicSmoothAbs(args[2],args[3],args[0],args[1]);break;case"s":element=this.createSVGPathSegCurvetoCubicSmoothRel(args[2],args[3],args[0],args[1]);break;case"z":element=this.createSVGPathSegClosePath();break;default:element=new e}n.push(element)}return n},concat:function(e){var t=[];for(var n=0,r=e.length;n<r;n++){t.push(e[n].vml())}return t.join("")},vml:function(e){e=this.parse(e);var t=[],n=0,r=0,i=0,s=0,o=0,u=0;for(var a=0,f=e.length;a<f;++a){var l=e[a],c=l.pathSegType,h=l.pathSegTypeAsLetter;if(c===0){}else{var p=n,d=r;if(c%2===1){n+=l.x;r+=l.y}else{n=l.x;r=l.y}if(h==="C"){t.push(l)}else if(h==="L"){t.push(l)}else if(h==="M"){if(a!==0){var v=e[a-1];if(v.pathSegTypeAsLetter==="M"){t.push(this.createSVGPathSegLinetoAbs(n,r));continue}}o=n;u=r;t.push(l)}else if(h==="m"){if(a!==0){var v=e[a-1];if(v.pathSegTypeAsLetter==="m"){t.push(this.createSVGPathSegLinetoAbs(n,r));continue}}o=n;u=r;t.push(this.createSVGPathSegMovetoAbs(n,r))}else if(h==="l"){t.push(this.createSVGPathSegLinetoAbs(n,r))}else if(h==="c"){t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,l.x1+p,l.y1+d,l.x2+p,l.y2+d))}else if(h.toLowerCase()==="z"){n=o;r=u;t.push(l)}else if(h==="Q"){i=2*n-l.x1;s=2*r-l.y1;t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,Math.round((p+2*l.x1)/3),Math.round((d+2*l.y1)/3),Math.round((2*l.x1+n)/3),Math.round((2*l.y1+r)/3)))}else if(h==="q"){var m=l.x1+p,g=l.y1+d;i=2*n-m;s=2*r-g;t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,(p+2*m)/3,(d+2*g)/3,(2*m+n)/3,(2*g+r)/3));m=g=null}else if(h==="A"||h==="a"){(function(e,t,n,r,i,s,o){if(e.r1===0||e.r2===0){return}var u=e.sweepFlag,a=e.angle,f=Math.abs(e.r1),l=Math.abs(e.r2),c=(r-t)/2,h=(i-n)/2,p=Math.cos(a*Math.PI/180),d=Math.sin(a*Math.PI/180),v=p*c+d*h,m=-1*d*c+p*h,g=v*v,y=m*m,b=f*f,w=l*l,E=g/b+y/w,S;if(E>1){f=Math.sqrt(E)*f;l=Math.sqrt(E)*l;S=0}else{var x=1;if(e.largeArcFlag===u){x=-1}S=x*Math.sqrt((b*w-b*y-w*g)/(b*y+w*g))}var T=S*f*m/l,N=-1*S*l*v/f,C=p*T-d*N+(r+t)/2,k=d*T+p*N+(i+n)/2,L=Math.atan2((m-N)/l,(v-T)/f)-Math.atan2(0,1),A=L>=0?L:2*Math.PI+L,L=Math.atan2((-m-N)/l,(-v-T)/f)-Math.atan2((m-N)/l,(v-T)/f),O=L>=0?L:2*Math.PI+L;if(!u&&O>0){O-=2*Math.PI}else if(u&&O<0){O+=2*Math.PI}var M=O*2/Math.PI,_=Math.ceil(M<0?-1*M:M),D=O/_,P=8/3*Math.sin(D/4)*Math.sin(D/4)/Math.sin(D/2),H=p*f,B=p*l,j=d*f,F=d*l,I=Math.cos(A),q=Math.sin(A),R=r-P*(H*q+F*I),U=i-P*(j*q-B*I);for(var z=0;z<_;++z){A+=D;I=Math.cos(A);q=Math.sin(A);var W=H*I-F*q+C,X=j*I+B*q+k,V=-P*(H*q+F*I),$=-P*(j*q-B*I);o.push(this.createSVGPathSegCurvetoCubicAbs(W,X,R,U,W-V,X-$));R=W+V;U=X+$}e=t=n=r=i=s=o=null})(l,n,r,p,d,null,t)}else if(h==="S"){if(a!==0){var v=t[t.length-1];if(v.pathSegTypeAsLetter==="C"){var m=2*v.x-v.x2,g=2*v.y-v.y2}else{var m=p,g=d}}else{var m=p,g=d}t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,m,g,l.x2,l.y2));m=g=null}else if(h==="s"){if(a!==0){var v=t[t.length-1];if(v.pathSegTypeAsLetter==="C"){var m=2*v.x-v.x2,g=2*v.y-v.y2}else{var m=p,g=d}}else{var m=p,g=d}t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,m,g,l.x2+p,l.y2+d));m=g=null}else if(h==="T"||h==="t"){if(a!==0){var v=e[a-1];if("QqTt".indexOf(v.pathSegTypeAsLetter)>-1){}else{i=p,s=d}}else{i=p,s=d}t.push(this.createSVGPathSegCurvetoCubicAbs(n,r,(p+2*i)/3,(d+2*s)/3,(2*i+n)/3,(2*s+r)/3));i=2*n-i;s=2*r-s;xx1=yy1=null}else if(h==="H"||h==="h"){t.push(this.createSVGPathSegLinetoAbs(n,d));r=d}else if(h==="V"||h==="v"){t.push(this.createSVGPathSegLinetoAbs(p,r));n=p}}}return t},createSVGPathSegClosePath:function(){return new t},createSVGPathSegMovetoAbs:function(e,t){s=new n;s.x=e;s.y=t;return s},createSVGPathSegMovetoRel:function(e,t){var n=new r;n.x=e;n.y=t;return n},createSVGPathSegLinetoAbs:function(e,t){var n=new i;n.x=e;n.y=t;return n},createSVGPathSegLinetoRel:function(e,t){var n=new o;n.x=e;n.y=t;return n},createSVGPathSegCurvetoCubicAbs:function(e,t,n,r,i,o){s=new u;s.x=e;s.y=t;s.x1=n;s.y1=r;s.x2=i;s.y2=o;return s},createSVGPathSegCurvetoCubicRel:function(e,t,n,r,i,s){var o=new a;o.x=e;o.y=t;o.x1=n;o.y1=r;o.x2=i;o.y2=s;return o},createSVGPathSegCurvetoQuadraticAbs:function(e,t,n,r){var i=new f;i.x=e;i.y=t;i.x1=n;i.y1=r;return i},createSVGPathSegCurvetoQuadraticRel:function(e,t,n,r){var i=new l;i.x=e;i.y=t;i.x1=n;i.y1=r;return i},createSVGPathSegArcAbs:function(e,t,n,r,i,s,o){var u=new c;u.x=e;u.y=t;u.r1=n;u.r2=r;u.angle=i;u.largeArcFlag=s;u.sweepFlag=o;return u},createSVGPathSegArcRel:function(e,t,n,r,i,s,o){var u=new h;u.x=e;u.y=t;u.r1=n;u.r2=r;u.angle=i;u.largeArcFlag=s;u.sweepFlag=o;return u},createSVGPathSegLinetoHorizontalAbs:function(e){var t=new p;t.x=e;t.y=0;return t},createSVGPathSegLinetoHorizontalRel:function(e){var t=new d;t.x=e;t.y=0;return t},createSVGPathSegLinetoVerticalAbs:function(e){var t=new v;t.x=0;t.y=e;return t},createSVGPathSegLinetoVerticalRel:function(e){var t=new m;t.x=0;t.y=e;return t},createSVGPathSegCurvetoCubicSmoothAbs:function(e,t,n,r){var i=new g;i.x=e;i.y=t;i.x2=n;i.y2=r;return i},createSVGPathSegCurvetoCubicSmoothRel:function(e,t,n,r){var i=new y;i.x=e;i.y=t;i.x2=n;i.y2=r;return i},createSVGPathSegCurvetoQuadraticSmoothAbs:function(e,t){var n=new b;n.x=e;n.y=t;return n},createSVGPathSegCurvetoQuadraticSmoothRel:function(e,t){var n=new w;n.x=e;n.y=t;return n}}}()
	
	return function (colorDefault) {
		if (document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape", "1.1")) {
			// SVG support detected, no need for fallback
			return;
		}
		
		var createVmlNode = null;
		
		function initVML () {
			if (createVmlNode) return;
			
			try {
				if (!document.namespaces.rvml) {
					document.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");
				}
				createVmlNode = function (tagName) {
					return document.createElement('<rvml:' + tagName + ' class="rvml">');
				};
			} catch (e) {
				createVmlNode = function (tagName) {
					return document.createElement('<' + tagName + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');
				};
			}
			
			document.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
		}
		
		$('svg').each(function () {
			initVML();
			
			var svgNode = $(this).get(0),
				svg = null,
				vmlPath,
				vml,
				shape,
				path,
				color = svgNode.style.fill || colorDefault;
			
			svg = (typeof XMLSerializer != 'undefined' ? new XMLSerializer().serializeToString(svg) : svgNode.parentNode.innerHTML).replace(/.*<path.*?d="/i, '').replace(/".*/, '');
			vmlPath = Core.SVG.path(svg);
			
			var group = createVmlNode('group');
			group.width = svgNode.width;
			group.height = svgNode.height;
			group.style.width = svgNode.width + 'px';
			group.style.height = svgNode.height + 'px';
			group.style.display = 'inline-block';
			group.style.position = 'relative';
			
			group.className += ' ' + svgNode.className;
			
			var shape = createVmlNode('shape');
			shape.width = svgNode.width;
			shape.height = svgNode.height;
			shape.style.width = svgNode.width + 'px';
			shape.style.height = svgNode.height + 'px';
			shape.setAttribute('coordsize', '312 312');
			shape.setAttribute('coordorigin', '0 0');
			shape.setAttribute('strokecolor', color);
			//shape.setAttribute('fillcolor', color);
			shape.style.position = 'absolute';
			shape.style.left = '0px';
			shape.style.top = '0px';
			
			var path = createVmlNode('path');
			path.v = vmlPath;
			
			shape.appendChild(path);
			group.appendChild(shape);
			
			svgNode.parentNode.insertBefore(group, svgNode);
			
			svgNode.style.display = 'none';
		});
			
	};
	
}));