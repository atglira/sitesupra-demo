/**
 * Table of contents:
 * 		- Tree
 * 		- TreeNode proxy
 * 		- Buttons
 * 		- Language selector
 */
@import "/cms/lib/supra/less/common.less";
@import "/cms/lib/supra/build/button/assets/skins/supra/less/button-mixin.less";

.su-sitemap {
	.layout-fullscreen();
	z-index: 2;
	background: url(/cms/lib/supra/img/background-center.jpg) 50% -48px no-repeat,
				url(/cms/lib/supra/img/background-pattern.jpg) 50% -48px repeat;
	
	.loading-icon {
		display: none;
	}
	&.loading {
		.su-tree {
			visibility: hidden;
		}
		.loading-icon {
			display: block;
		}
	}
	
	.animation-node {
		background: #fff;
		position: absolute;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		z-index: 100;
	}
}

.su-sitemap-scrollable {
	position: absolute;
	left: 0;
	top: 80px;
	right: 0;
	bottom: 0;
	overflow: hidden;
	
	.su-sitemap-content {
		.user-select (none);
		
		position: absolute;
		width: 5000px;
		height: 2500px;
		top: 0;
		left: 50%;
		margin-top: 0;
		margin-left: -2500px;
		
		text-align: center;
		
		&.su-sitemap-dragging {
			cursor: move;
		}
	}
}

/**
 * ---------------------------- Tree ----------------------------
 */
.su-tree {
	display: inline-block;
	padding: 30px 20px 0;
}

.su-tree-node {
	display: inline-block;
	vertical-align: top;
	width: 100px;
	height: 154px;
	position: relative;
	padding: 22px 10px 0;
	
	background: url(images/tree-item-lines.png) -675px 0 no-repeat;
	
	&:first-child {
		background-position: -185px 0;
	}
	&:last-child {
		background-position: -1165px 0;
	}
	&:first-child:last-child {
		background-position: -1655px 0;
	}
	
	& > .su-tree-node-content {
		.background {
			background: url(images/tree-item.png) 0 0 no-repeat;
			width: 200px;
			height: 167px;
			position: absolute;
			z-index: -1;
			top: 22px;
			left: -40px;
		}
		
		.item {
			.user-select (none);
			padding: 10px;
			position: relative;
			height: 80px;
			
			img {
				display: inline-block;
			}
			
			.edit {
				.border-radius (8px, 8px, 0, 0);
				position: absolute;
				left: 0;
				top: 0;
				right: 0;
				padding: 7px 9px 4px 0;
				display: none;
				background: rgba(0, 0, 0, 0.65);
				cursor: default;
				text-align: right;
				
				.su-button-sitemap-blue p {
					padding: 0 0 0 20px;
					background: url(images/buttons-icon-open.png) 2px 5px no-repeat;
				}
				.su-button-sitemap-gray p {
					padding: 0;
					width: 12px;
					background: url(images/buttons-icon-edit.png) 50% 5px no-repeat;
				}
			}
			
			.su-button-sitemap-blue,
			.su-button-sitemap-gray {
				display: none;
			}
			
			.status-global {
				display: none;
				position: absolute;
				left: -2px;
				top: 71px;
				width: 104px;
				height: 18px;
				background: url(images/tree-item-status-unpublished.png) 0 0 no-repeat;
				padding: 12px 0 0;
				
				color: #676876;
				font-size: 10px;
				font-weight: bold;
				line-height: 12px;
				text-align: center;
				text-transform: uppercase;
				text-shadow: 0 1px 0 rgba(255,255,255,0.42);
			}
			
			.loading-icon {
				margin: -18px 0 0 -18px;
			}
			&.loading .loading-icon {
				display: block;
			}
		}
		
		label {
			color: #fff;
			font-size: 12px;
			font-weight: bold;
			line-height: 14px;
			text-overflow: ellipsis;
			text-shadow: 0 1px 0 rgba(0,0,0,0.75);
			white-space: normal;
			display: inline-block;
			width: 90px;
			height: 30px;
			overflow: hidden;
			padding: 8px 0 0 0;
		}
		
		.arrow {
			position: absolute;
			left: 59px;
			bottom: 0;
			display: none;
			width: 2px;
			height: 11px;
			background: #fff;
		}
	}
	
	.children {
		position: absolute;
		left: 0;
		top: 100%;
		white-space: nowrap;
		display: none;
	}
	
	&.root {
		height: 141px;
		padding-top: 0;
		background: none;
		
		& > .su-tree-node-content {
			.background {
				top: 0;
			}
			
			label {
				font-size: 14px;
				line-height: 16px;
				height: 16px;
				white-space: nowrap;
			}
		}
	}
	
	&.page {
		& > .su-tree-node-content {
			.item img {
				.box-shadow (0, 2px, 3px, rgba(0,0,0,0.4));
			}
		}
	}
	
	&.expandable {
		& > .su-tree-node-content {
			.item {
				cursor: pointer;
			}
			.highlight {
				cursor: default;
			}
		}
	}
	
	&.expanded {
		& > .su-tree-node-content {
			.arrow {
				display: block;
			}
		}
		& > .children {
			display: block;
		}
	}
	
	&.editable {
		& > .su-tree-node-content {
			.item:hover .edit,
			.item.hover .edit {
				display: block;
			}
			.su-button-sitemap-gray {
				display: inline-block;
			}
		}
	}
	
	&.selectable.editable {
		& > .su-tree-node-content {
			.su-button-sitemap-blue {
				display: inline-block;
			}
		}
	}
	
	&.global {
		& > .su-tree-node-content {
			.status-global {
				display: block;
			}
		}
	}
	
	/* Highlight */
	&.highlighted > .su-tree-node-content {
		.highlight {
			display: none;
		}
		& > label {
			color: #fff !important;
		}
	}
	
	/* Drag and drop marker */
	&.marker-before {
		& > .su-tree-node-content .marker {
			position: absolute;
			width: 10px;
			height: 10px;
			background: red;
			left: -5px;
			top: 65px;
		}
	}
	&.marker-after {
		& > .su-tree-node-content .marker {
			position: absolute;
			width: 10px;
			height: 10px;
			background: red;
			right: -5px;
			top: 65px;
		}
	}
	&.marker-inside {
		& > .su-tree-node-content .marker {
			position: absolute;
			z-index: 1;
			width: 100px;
			height: 100px;
			background: red;
			left: 10px;
			top: 22px;
		}
	}
	
	&.root.marker-before,
	&.root.marker-after {
		& > .su-tree-node-content .marker {
			top: 43px;
		}
	}
	&.root.marker-inside {
		& > .su-tree-node-content .marker {
			top: 0;
		}
	}
	
	/* CSS3 animations */
	&.animate {
		& > .children {
			@duration: 0.15s;
			@easing: ease-in;
			
			-o-transition: -o-transform @duration @easing, opacity @duration @easing;
			-moz-transition: -moz-transform @duration @easing, opacity @duration @easing;
			-webkit-transition: -webkit-transform @duration @easing, opacity @duration @easing;
			transition: transform @duration @easing, opacity @duration @easing;
			
			//.transform-origin (center top);
			//.transform (scale(0.35));
			
			opacity: 0;
			display: block;
		}
		&.expanded > .children {
			.transition-duration (0.25s, 0.25s);
			//.transform (scale(1));
			opacity: 1;
			
			@easing: ease-out;
			-o-transition-timing-function: @easing;
			-moz-transition-timing-function: @easing;
			-webkit-transition-timing-function: @easing;
			transition-timing-function: @easing;
		}
		&.children-hidden > .children {
			display: none !important;
		}
	}
	
	//Draging
	&.yui3-dd-dragging.expanded > .children,
	&.yui3-dd-dragging > .su-tree-node-content {
		opacity: 0.25;
	}
}

/* List node */
.su-tree-node-list {
	.su-panel {
		position: relative !important;
		left: 0 !important;
		top: 0 !important;
	}
	
	&.expanded-list {
		width: 470px;
		height: auto;
		background-position: -490px 0;
		
		&:first-child {
			background-position: 0 0;
		}
		&:last-child {
			background-position: -980px 0;
		}
		&:first-child:last-child {
			background-position: -1470px 0;
		}
		
		& > .su-tree-node-content {
			label,
			.background,
			.item {
				display: none;
			}
		}
	}
	
	.su-datagrid td {
		cursor: pointer;
	}
	.su-datagrid tr:hover .row-title {
		text-decoration: underline;
	}
	&.highlighted .su-datagrid td,
	&.highlighted .su-datagrid tr:hover .row-title {
		cursor: default;
		text-decoration: none;
	}
	
	/* Drag and drop */
	&.marker-inside > .su-tree-node-content .marker {
		.border-radius (6px);
		
		z-index: 2;
		right: 10px;
		bottom: 0;
		width: auto;
		height: auto;
	}
}

/* Highlighted item */
.su-tree-highlighted {
	.su-tree-node .highlight {
		position: absolute;
		background: rgb(4, 0, 16);
		opacity: 0.5;
		border-radius: 8px;
		left: 0;
		top: 0;
		right: 0;
		height: 100px;
	}
	.su-tree-node > .su-tree-node-content {
		.item:hover .edit {
			display: none;
		}
		.item.hover .edit {
			display: block;
		}
		label {
			color: #BDB8C4;
		}
	}
}

.su-tree-node.visibility-root {
	background: none;
	
	& > .su-tree-node-content {
		visibility: hidden;
	}
}

.children.visibility-siblings {
	& > .su-tree-node {
		visibility: hidden;
	}
	& > .visibility-root {
		visibility: visible;
	}
}

/**
 * ---------------------------- TreeNode proxy ----------------------------
 */
.su-tree-node-proxy {
	background: none;
	z-index: 300;
	text-align: center;
	cursor: move;
	width: 100px !important;
	
	.item {
		cursor: move;
		text-align: center;
	}
	
	.arrow,
	.children,
	span.title {
		display: none !important;
	}
	
	// Item from recycle bin
	span.img-restore {
		display: block;
		overflow: hidden;
		width: 52px;
		height: 52px;
		
		img {
			display: block;
			position: relative;
			margin-left: -382px;
		}
	}
}

/**
 * ---------------------------- Tree View ----------------------------
 */
.su-treeview-center {
	position: absolute;
	left: 50%;
	top: 0;
	width: 0;
	height: 0;
	overflow: hidden;
}

.su-treeview-left,
.su-treeview-right {
	background: url(images/side-arrows.png) 0 0 no-repeat;
	display: block;
	width: 28px;
	height: 50px;
	position: absolute;
	z-index: 1;
	top: 50%;
	margin-top: -25px;
	cursor: pointer;
}
.su-treeview-left {
	left: 7px;
	
	&:hover,
	&.yui3-dd-drop-over {
		background-position: 0 -50px;
	}
}
.su-treeview-right {
	background-position: 0 -100px;
	right: 7px;
	
	&:hover,
	&.yui3-dd-drop-over {
		background-position: 0 -150px;
	}
}

.su-treeview-up {
	display: block;
	height: 61px;
	margin: 0 0 0 -25px;
	position: absolute;
	top: 2px;
	left: 0;
	right: 0;
	background: url(images/navigation-arrows.png) 50% -6px no-repeat;
	cursor: pointer;
	
	&:hover,
	&.yui3-dd-drop-over {
		background-position: 50% -67px;
	}
}

.su-treeview-fade-left,
.su-treeview-fade-right {
	position: absolute;
	top: 0;
	bottom: 0;
	width: 60px;
}

.su-treeview-fade-left {
	left: 0;
}
.su-treeview-fade-right {
	right: 0;
}

/**
 * ---------------------------- Buttons ----------------------------
 */
/* Default */
.su-button-sitemap-blue {
	.button (url(images/buttons.png), 21px, 0px);
	
	p {
		font-size: 10px;
	}
}
.su-button-sitemap-gray {
	.button (url(images/buttons.png), 21px, 252px);
}

.gecko .su-button-sitemap-blue,
.gecko .su-button-sitemap-gray {
	/* Fix button > p offset */
	p {
		position: relative;
		margin: 0 -2px;
	}
}

/**
 * ---------------------------- Language selector ----------------------------
 */
.su-sitemap-languages {
	position: absolute;
	z-index: 1;
	left: 0;
	top: 0;
	right: 0;
	text-align: center;
	padding-bottom: 10px;
	
	.su-sitemap-languages-bg {
		background: url(/cms/lib/supra/img/background-center.jpg)  50% -48px no-repeat,
					url(/cms/lib/supra/img/background-pattern.jpg) 50% -48px repeat;
		
		position: absolute;
		width: 100%;
		height: 100%;
	}
	
	.yui3-input-select-list {
		position: relative;
		z-index: 1;
		
		label {
			color: #BDB8C4;
			text-align: center;
			text-shadow: 0 1px 0 rgba(0,0,0,.75);
			
			display: block;
			width: auto;
			padding: 19px 0 2px;
		}
		
		.su-button {
			width: auto !important;
			
			&,
			div,
			button {
				height: 34px;
				width: auto;
				background: url(images/language-selector.png) 0 -170px no-repeat;
			}
			div {
				padding: 0 17px;
			}
			
			&,
			&.su-button-first {
				background-position: 100% -170px;
			}
			button {
				background-repeat: repeat-x;
			}
			
			p {
				color: #BDB8C4;
				text-shadow: 0 -1px 0 rgba(0,0,0,.75);
				padding: 0 7px;
			}	
		
			&.su-button-first div {
				background-position: 0 -204px;
			}
			&.su-button-last {
				background-position: 100% -238px;
			}
		
			&.su-button-down,
			&.su-button-mouse-down {
				& {
					background-position: 100% -68px;
				}
				div {
					background-position: 0 0;
				}
				button {
					background-position: 0 -34px;
				}
				p {
					color: #fff;
					text-shadow: 0 -1px 0 rgba(0,0,0,.5);
				}
				
				&.su-button-first div {
					background-position: 0 -102px;
				}
				&.su-button-last {
					background-position: 100% -136px;
				}
			}
			&.su-button-down.su-button-mouse-hover {
				& {
					background-position: 100% -340px;
				}
				div {
					background-position: 0 -272px;
				}
				button {
					background-position: 0 -306px;
				}
				
				&.su-button-first div {
					background-position: 0 -374px;
				}
				&.su-button-last {
					background-position: 100% -408px;
				}
			}
			&.su-button-mouse-down,
			&.su-button-mouse-down.su-button-mouse-hover {
				& {
					background-position: 100% -510px;
				}
				div {
					background-position: 0 -442px;
				}
				button {
					background-position: 0 -476px;
				}
				p {
					color: #fff;
					text-shadow: 0 -1px 0 rgba(0,0,0,.5);
				}
				
				&.su-button-first div {
					background-position: 0 -544px;
				}
				&.su-button-last {
					background-position: 100% -578px;
				}
			}
		}
	}
}

/**
 * ---------------------------- Recycle bin ----------------------------
 */
.su-sitemap .su-delete-page {
	cursor: pointer;
}


@import "modules/new-page.less";
@import "modules/delete-page.less";
@import "modules/plugin-page-edit.less";
@import "modules/plugin-page-add.less";
@import "modules/plugin-page-global.less";