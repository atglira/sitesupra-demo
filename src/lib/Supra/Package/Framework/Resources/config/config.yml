services:
    locale.manager:
        class: \Supra\Core\Locale\LocaleManager
    locale.detector.cookie:
        class: \Supra\Core\Locale\Detector\CookieDetector
    locale.storage.cookie:
        class: \Supra\Core\Locale\Storage\CookieStorage
    supra.doctrine.event_subscriber.table_name_prefixer:
        class: \Supra\Core\Doctrine\Subscriber\TableNamePrefixer
        parameters: ['su_', '']
    supra.doctrine.event_subscriber.detached_discriminator_handler:
        class: \Supra\Database\DetachedDiscriminatorHandler
    supra.doctrine.event_subscriber.nested_set_listener:
        class: \Supra\NestedSet\Listener\NestedSetListener
locales:
    locales:
        -
            id: en_LV
            title: English
            country: Latvia
            properties:
               flag: lv
               language: en
            active: false
        -
            id: lv_LV
            title: Latvian
            country: Latvia
            properties:
                flag: lv
                language: lv
        -
            id: ru_RU
            title: Russian
            country: Russia
            properties:
                flag: ru
                language: ru
    detectors:
        - locale.detector.cookie
    ## @FIXME: Doesn't work now, requires Response object
    ##locale_storage:
    ##    - locale.storage.cookie
    storage: ~
    current: lv_LV
doctrine:
    credentials:
        hostname: localhost
        username: root
        password: ~
        charset: utf8
        database: supra9
    event_managers:
        public:
            subscribers:
                - supra.doctrine.event_subscriber.table_name_prefixer
                - supra.doctrine.event_subscriber.detached_discriminator_handler
                - supra.doctrine.event_subscriber.nested_set_listener
    configuration:
        types:
            - [supraId20,  \Supra\Core\Doctrine\Type\SupraIdType]
            - [path,  \Supra\Core\Doctrine\Type\PathType]
        type_overrides:
            - [array, \Supra\Core\Doctrine\Type\ArrayType]
    connections:
        default:
            host: %framework.doctrine.credentials.hostname%
            user: %framework.doctrine.credentials.username%
            password: %framework.doctrine.credentials.password%
            dbname: %framework.doctrine.credentials.database%
            charset: %framework.doctrine.credentials.charset%
            driver: mysql
            event_manager: public
    entity_managers:
        public:
            connection: default
            event_manager: public
