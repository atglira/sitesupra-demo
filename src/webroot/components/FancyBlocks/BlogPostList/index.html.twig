<div class="block blog-list">
	
	{% set heading_class = 'no-heading' %}
	{% set title_empty = supraBlock.isEmpty('block_title') %}
	{% if supra.cmsRequest or not title_empty %}
	<h2 class="block-title {% if title_empty %}hidden{% endif %}"><div>
		{{ supraBlock.property('block_title') }}
		{% if not title_empty %}
			{% set heading_class = 'has-heading' %}
		{% endif %}
	</div></h2>
	{% endif %}
	
	{% if posts %}
	<section>
	
		{% for post in posts %}
			
			{# Promoted posts are first two items #}
			{% set promoted = false %}
			{% if loop.index < 3 and currentPage == 0 %}
				{% set promoted = true %}
			{% endif %}
			
			<article class="{% if promoted %}promoted{% endif %} clearfix">
				
				{# Image or video #}
				{% if promoted and post.media %}
					<figure class="media">
						{{ post.media }}
					</figure>
				{% endif %}
				
				{# Heading #}
				<header>
					{# Date, for 'promoted' items it is slightly different #}
					{% if promoted %}
						<time datetime="{{ post.date.format('Y-m-d') }}"><b>{{ post.date.format('j') }}</b>{{ post.date.format('m.Y') }}</time>
					{% else %}
						<time datetime="{{ post.date.format('Y-m-d') }}">{{ post.date.format('d/m/Y') }}</time>
					{% endif %}
					
					{# Title #}
					<h3><a href="/{{ supra.locale.id }}{{ post.path }}">{{ post.title }}</a></h3>
				</header>
				
				{# Image or video #}
				{% if not promoted and post.media %}
					<figure class="media">
						{{ post.media }}
					</figure>
				{% endif %}
				
				{# Description #}
				<p>{{ post.description }}</p>
			</article>
			
		{% endfor %}
		
	</section>
	{% endif %}
	
	{# Pagination #}
	{% if totalPages > 1 %}
		<nav class="pagination">{% spaceless %}
			{% if currentPage > 0 %}
				<a class="prev" rel="prev" href="?page={{ currentPage - 1 }}">{{ supraBlock.property('previous_page') }}</a>
			{% else %}
				<span class="prev">{{ supraBlock.property('previous_page') }}</span>
			{% endif %}
			
			{% set from = currentPage - 4 %}
			{% if from < 0 %}{% set from = 0 %}{% endif %}
			
			{% set to = from + 7 %}
			{% if to > totalPages - 1 %}
				{% set to = totalPages - 1 %}
				{% set from = to - 7 %}
				{% if from < 0 %}{% set from = 0 %}{% endif %}
			{% endif %}
			
			{% if from > 0 %}<span class="dots">...</span>{% endif %}
			
			{% for i in from..to %}
				{% if i == currentPage %}
					<span class="item active">{{ i + 1 }}</span>
				{% else %}
					<a class="item" href="?page={{ i }}">{{ i + 1 }}</a>
				{% endif %}
			{% endfor %}
			
			{% if to < totalPages - 1 %}<span class="dots">...</span>{% endif %}
			
			{% if currentPage < totalPages - 1 %}
				<a class="next" rel="next" href="?page={{ currentPage + 1 }}">{{ supraBlock.property('next_page') }}</a>
			{% else %}
				<span class="next">{{ supraBlock.property('next_page') }}</span>
			{% endif %}
		{% endspaceless %}</nav>
	{% endif %}
	
</div>